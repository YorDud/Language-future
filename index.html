<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Язык будущего | Контекстно-зависимый генератор</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c1c2e, #1a365d, #2d4a6e);
            color: #e6f2ff;
            min-height: 100vh;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 15px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(12, 32, 66, 0.8);
            border-radius: 18px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(64, 156, 255, 0.3);
            backdrop-filter: blur(10px);
            width: 100%;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #4facfe, #00c6fb, #00d4ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 3px 12px rgba(0, 0, 0, 0.2);
            line-height: 1.2;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .tagline {
            font-size: 1.1rem;
            color: #b3e0ff;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .main-app {
            display: flex;
            flex-direction: column;
            gap: 25px;
            width: 100%;
        }

        .input-section {
            background: rgba(18, 40, 76, 0.8);
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(64, 156, 255, 0.2);
            backdrop-filter: blur(10px);
            width: 100%;
        }

        h2 {
            font-size: 1.7rem;
            margin-bottom: 20px;
            color: #4facfe;
            display: flex;
            align-items: center;
            gap: 10px;
            line-height: 1.3;
        }

        h2 i {
            color: #00c6fb;
        }

        .input-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
        }

        .definition-input {
            width: 100%;
            min-height: 130px;
            padding: 18px;
            background: rgba(8, 22, 44, 0.9);
            border: 2px solid #2a4d7c;
            border-radius: 12px;
            color: #e6f2ff;
            font-size: 1.1rem;
            line-height: 1.5;
            resize: vertical;
            transition: all 0.3s;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .definition-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.2);
        }

        .input-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            width: 100%;
        }

        .btn {
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            flex: 1;
            min-width: 180px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            box-sizing: border-box;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(to right, #1a73e8, #4facfe);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(to right, #4facfe, #1a73e8);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(79, 172, 254, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(to right, #37474f, #546e7a);
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(to right, #546e7a, #37474f);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(84, 110, 122, 0.4);
        }

        .btn-danger {
            background: linear-gradient(to right, #c62828, #ef5350);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(to right, #ef5350, #c62828);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(239, 83, 80, 0.4);
        }

        .btn-success {
            background: linear-gradient(to right, #2e7d32, #4caf50);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(to right, #4caf50, #2e7d32);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        }

        .btn-info {
            background: linear-gradient(to right, #0066cc, #3399ff);
            color: white;
        }

        .btn-info:hover {
            background: linear-gradient(to right, #3399ff, #0066cc);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(51, 153, 255, 0.4);
        }

        .voice-status {
            margin-top: 15px;
            padding: 15px;
            border-radius: 12px;
            background: rgba(8, 22, 44, 0.9);
            display: none;
            align-items: center;
            gap: 15px;
            border-left: 5px solid #4facfe;
            width: 100%;
            box-sizing: border-box;
        }

        .voice-active {
            display: flex;
            background: rgba(25, 80, 120, 0.4);
            border: 1px solid #00c6fb;
        }

        .pulse {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4facfe;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 10px #4facfe;
            flex-shrink: 0;
        }

        @keyframes pulse {
            0% { transform: scale(0.9); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(0.9); opacity: 0.7; }
        }

        .result-section {
            background: rgba(18, 40, 76, 0.8);
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(64, 156, 255, 0.2);
            backdrop-filter: blur(10px);
            display: none;
            width: 100%;
            box-sizing: border-box;
        }

        .result-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .generated-word {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(8, 22, 44, 0.9);
            border-radius: 15px;
            border: 2px solid #2a4d7c;
            width: 100%;
            box-sizing: border-box;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }

        .word {
            font-size: 3.2rem;
            font-weight: bold;
            color: #4facfe;
            margin-bottom: 12px;
            text-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
            line-height: 1.2;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .definition {
            font-size: 1.2rem;
            color: #b3e0ff;
            line-height: 1.6;
            margin: 0 auto;
            word-wrap: break-word;
            overflow-wrap: break-word;
            padding: 0 5px;
        }

        .word-details {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
            width: 100%;
        }

        .detail-card {
            background: rgba(30, 60, 114, 0.6);
            padding: 15px;
            border-radius: 10px;
            min-width: 180px;
            text-align: center;
            flex: 1;
            box-sizing: border-box;
            max-width: 300px;
        }

        .detail-title {
            font-size: 0.85rem;
            color: #80d0ff;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.1rem;
            color: #4facfe;
            font-weight: bold;
            word-break: break-word;
        }

        .article-section {
            background: rgba(8, 22, 44, 0.9);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid #2a4d7c;
            display: none;
            width: 100%;
            box-sizing: border-box;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }

        .article-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        .article-title {
            font-size: 1.7rem;
            color: #4facfe;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 12px;
            border-bottom: 2px solid #2a4d7c;
            line-height: 1.3;
            word-break: break-word;
        }

        .article-content {
            line-height: 1.7;
            color: #d1e9ff;
            font-size: 1.05rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .article-content p {
            margin-bottom: 18px;
            text-align: left;
            word-break: break-word;
        }

        .examples {
            margin-top: 20px;
            padding: 18px;
            background: rgba(30, 60, 114, 0.6);
            border-radius: 12px;
            border-left: 5px solid #4facfe;
            box-sizing: border-box;
        }

        .examples h4 {
            color: #4facfe;
            margin-bottom: 12px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .examples ul {
            padding-left: 20px;
        }

        .examples li {
            margin-bottom: 10px;
            line-height: 1.5;
            word-break: break-word;
        }

        .article-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
            width: 100%;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            padding: 20px;
            color: #88d3fa;
            font-size: 0.95rem;
            border-top: 1px solid rgba(64, 156, 255, 0.3);
            width: 100%;
            background: rgba(12, 32, 66, 0.5);
            border-radius: 15px;
            box-sizing: border-box;
        }

        .examples-list {
            margin-top: 25px;
            background: rgba(12, 32, 66, 0.7);
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            box-sizing: border-box;
        }

        .examples-list h3 {
            color: #4facfe;
            margin-bottom: 15px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .example-item {
            padding: 16px;
            background: rgba(8, 22, 44, 0.9);
            border-radius: 10px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            border: 1px solid #2a4d7c;
            box-sizing: border-box;
            width: 100%;
        }

        .example-item:hover {
            border-left: 4px solid #4facfe;
            background: rgba(30, 60, 114, 0.6);
            transform: translateX(5px);
        }

        .example-title {
            font-weight: bold;
            color: #80d0ff;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }

        .example-text {
            color: #c2e0ff;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .speech-status {
            margin-top: 15px;
            padding: 15px;
            border-radius: 12px;
            background: rgba(30, 60, 114, 0.6);
            display: none;
            align-items: center;
            gap: 15px;
            border-left: 5px solid #4caf50;
            width: 100%;
            box-sizing: border-box;
        }

        .speech-active {
            display: flex;
            background: rgba(25, 100, 60, 0.4);
            border: 1px solid #4caf50;
        }

        .context-match {
            margin-top: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            box-sizing: border-box;
        }

        .high-match {
            background-color: rgba(76, 175, 80, 0.2);
            color: #a5d6a7;
            border-left: 3px solid #4caf50;
        }

        .medium-match {
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffecb3;
            border-left: 3px solid #ffc107;
        }

        .low-match {
            background-color: rgba(244, 67, 54, 0.2);
            color: #ffcdd2;
            border-left: 3px solid #f44336;
        }

        .legalize-btn {
            margin-top: 20px;
            text-align: center;
            width: 100%;
        }

        /* Адаптивность для мобильных устройств */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 10px;
                max-width: 100%;
            }
            
            header {
                padding: 18px 15px;
                margin-bottom: 20px;
                border-radius: 16px;
            }
            
            h1 {
                font-size: 2.2rem;
                line-height: 1.2;
            }
            
            .tagline {
                font-size: 1rem;
                line-height: 1.3;
            }
            
            .input-section, .result-section {
                padding: 20px 15px;
                border-radius: 16px;
            }
            
            h2 {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }
            
            .definition-input {
                font-size: 1rem;
                padding: 15px;
                min-height: 120px;
            }
            
            .btn {
                padding: 12px 15px;
                font-size: 0.95rem;
                min-width: 100%;
                margin-bottom: 5px;
            }
            
            .input-buttons {
                gap: 10px;
            }
            
            .word {
                font-size: 2.5rem;
                margin-bottom: 10px;
            }
            
            .definition {
                font-size: 1.1rem;
                line-height: 1.5;
            }
            
            .word-details {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            
            .detail-card {
                min-width: 100%;
                max-width: 100%;
                padding: 12px 15px;
            }
            
            .detail-title {
                font-size: 0.8rem;
            }
            
            .detail-value {
                font-size: 1rem;
            }
            
            .article-section {
                padding: 20px 15px;
            }
            
            .article-title {
                font-size: 1.5rem;
                padding-bottom: 10px;
            }
            
            .article-content {
                font-size: 1rem;
                line-height: 1.6;
            }
            
            .article-content p {
                margin-bottom: 15px;
            }
            
            .examples-list {
                padding: 18px 15px;
            }
            
            .examples-list h3 {
                font-size: 1.3rem;
            }
            
            .example-item {
                padding: 14px;
            }
            
            .example-title {
                font-size: 0.95rem;
            }
            
            .example-text {
                font-size: 0.9rem;
            }
            
            footer {
                padding: 18px 15px;
                font-size: 0.9rem;
            }
            
            .article-buttons .btn {
                min-width: 100%;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.9rem;
            }
            
            .word {
                font-size: 2.2rem;
            }
            
            .definition {
                font-size: 1rem;
            }
            
            .btn {
                padding: 10px 12px;
                font-size: 0.9rem;
            }
            
            .article-title {
                font-size: 1.3rem;
            }
            
            .article-content {
                font-size: 0.95rem;
            }
            
            .examples h4 {
                font-size: 1.1rem;
            }
            
            .voice-status, .speech-status {
                padding: 12px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 360px) {
            h1 {
                font-size: 1.7rem;
            }
            
            .word {
                font-size: 1.9rem;
            }
            
            .btn {
                padding: 9px 10px;
                font-size: 0.85rem;
            }
            
            .article-title {
                font-size: 1.2rem;
            }
        }

        /* Для очень длинных слов */
        .word, .article-title, .article-content, .definition, .detail-value {
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
        }

        /* Улучшение прокрутки на мобильных */
        @media (max-width: 768px) {
            body {
                -webkit-overflow-scrolling: touch;
            }
            
            .generated-word, .article-section, .examples {
                max-height: none;
                overflow-y: visible;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-language"></i> Язык будущего</h1>
            <p class="tagline">Контекстно-зависимый генератор новых слов с умным анализом описания</p>
        </header>
        
        <div class="main-app">
            <section class="input-section">
                <h2><i class="fas fa-keyboard"></i> Опишите новое понятие</h2>
                <div class="input-container">
                    <textarea id="definitionInput" class="definition-input" placeholder="Опишите понятие, для которого нужно создать новое слово. Чем подробнее описание, тем точнее будет сгенерированное слово. Например: 'должность человека который будет обучать роботов' или 'термин для смешанного чувства восхищения и тревоги при общении с эмпатичным ИИ'"></textarea>
                    
                    <div class="input-buttons">
                        <button id="generateBtn" class="btn btn-primary">
                            <i class="fas fa-brain"></i> Сгенерировать слово
                        </button>
                        <button id="voiceBtn" class="btn btn-secondary">
                            <i class="fas fa-microphone"></i> Голосовой ввод
                        </button>
                        <button id="clearBtn" class="btn btn-danger">
                            <i class="fas fa-trash-alt"></i> Очистить
                        </button>
                    </div>
                    
                    <div id="voiceStatus" class="voice-status">
                        <div class="pulse"></div>
                        <span>Говорите сейчас... Я слушаю. Скажите "стоп" чтобы закончить.</span>
                    </div>
                </div>
                
                <div class="examples-list">
                    <h3><i class="fas fa-lightbulb"></i> Примеры для вдохновения</h3>
                    <div class="example-item" data-example="должность человека который будет обучать роботов">
                        <div class="example-title"><i class="fas fa-robot"></i> Профессия будущего</div>
                        <div class="example-text">Специалист по обучению и адаптации роботизированных систем</div>
                    </div>
                    <div class="example-item" data-example="термин для смешанного чувства восхищения и тревоги при общении с эмпатичным ИИ">
                        <div class="example-title"><i class="fas fa-heart"></i> Эмоция будущего</div>
                        <div class="example-text">Сложное эмоциональное состояние при взаимодействии с эмоционально-развитым искусственным интеллектом</div>
                    </div>
                    <div class="example-item" data-example="устройство для перевода мыслей в текст в реальном времени">
                        <div class="example-title"><i class="fas fa-brain"></i> Технология будущего</div>
                        <div class="example-text">Гаджет для преобразования нейронных сигналов в письменную речь</div>
                    </div>
                    <div class="example-item" data-example="профессия специалиста по исправлению ошибок в работе нейронных сетей">
                        <div class="example-title"><i class="fas fa-user-graduate"></i> Профессия будущего</div>
                        <div class="example-text">Эксперт по отладке и коррекции искусственных нейронных сетей</div>
                    </div>
                </div>
            </section>
            
            <section id="resultSection" class="result-section">
                <div class="generated-word">
                    <div class="word" id="generatedWord">Роботьютор</div>
                    <div class="definition" id="generatedDefinition"></div>
                    
                    <div id="contextMatch" class="context-match high-match">
                        <i class="fas fa-check-circle"></i>
                        <span>Высокое соответствие контексту: слово точно отражает описание</span>
                    </div>
                    
                    <div class="word-details">
                        <div class="detail-card">
                            <div class="detail-title">Тип слова</div>
                            <div class="detail-value" id="wordType">Существительное</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-title">Сфера применения</div>
                            <div class="detail-value" id="wordDomain">Робототехника</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-title">Уровень соответствия</div>
                            <div class="detail-value" id="wordComplexity">Высокий</div>
                        </div>
                    </div>
                </div>
                
                <div class="legalize-btn">
                    <button id="legalizeBtn" class="btn btn-success">
                        <i class="fas fa-file-contract"></i> Узаконить термин
                    </button>
                </div>
                
                <div id="speechStatus" class="speech-status">
                    <div class="pulse" style="background: #4caf50;"></div>
                    <span>Идет озвучивание статьи... Нажмите на кнопку еще раз, чтобы остановить.</span>
                </div>
                
                <div id="articleSection" class="article-section">
                    <h3 class="article-title" id="articleTitle">Научная статья: "Роботьютор"</h3>
                    <div class="article-content" id="articleContent">
                        <!-- Статья будет сгенерирована здесь -->
                    </div>
                    
                    <div class="article-buttons">
                        <button id="speakBtn" class="btn btn-info">
                            <i class="fas fa-volume-up"></i> Озвучить статью
                        </button>
                        <button id="stopSpeakBtn" class="btn btn-danger">
                            <i class="fas fa-stop-circle"></i> Остановить озвучивание
                        </button>
                    </div>
                </div>
            </section>
        </div>
        
        <footer>
            <p><i class="fas fa-robot"></i> «Язык будущего» — умный генератор новых слов с контекстным анализом</p>
            <p>© 2025 Все созданные термины являются интеллектуальной собственностью их авторов: YORIK & Дударев Мирослав Александрович</p>
        </footer>
    </div>

    <script>
        // Элементы DOM
        const definitionInput = document.getElementById('definitionInput');
        const generateBtn = document.getElementById('generateBtn');
        const voiceBtn = document.getElementById('voiceBtn');
        const clearBtn = document.getElementById('clearBtn');
        const voiceStatus = document.getElementById('voiceStatus');
        const resultSection = document.getElementById('resultSection');
        const generatedWord = document.getElementById('generatedWord');
        const generatedDefinition = document.getElementById('generatedDefinition');
        const contextMatch = document.getElementById('contextMatch');
        const wordType = document.getElementById('wordType');
        const wordDomain = document.getElementById('wordDomain');
        const wordComplexity = document.getElementById('wordComplexity');
        const legalizeBtn = document.getElementById('legalizeBtn');
        const articleSection = document.getElementById('articleSection');
        const articleTitle = document.getElementById('articleTitle');
        const articleContent = document.getElementById('articleContent');
        const exampleItems = document.querySelectorAll('.example-item');
        const speakBtn = document.getElementById('speakBtn');
        const stopSpeakBtn = document.getElementById('stopSpeakBtn');
        const speechStatus = document.getElementById('speechStatus');
        
        // Инициализация голосового ввода
        let recognition = null;
        let isListening = false;
        let currentWord = "";
        let currentWordData = null;
        let speechSynthesis = window.speechSynthesis;
        let isSpeaking = false;
        let currentUtterance = null;
        let voiceResultText = "";
        
        // Проверяем поддержку Web Speech API (распознавание)
        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.lang = 'ru-RU';
                recognition.interimResults = true; // Показываем промежуточные результаты
                recognition.continuous = false; // Остановка после паузы
                recognition.maxAlternatives = 1;
                
                // Сбрасываем состояние перед началом записи
                voiceResultText = "";
                
                recognition.onstart = function() {
                    isListening = true;
                    voiceStatus.classList.add('voice-active');
                    voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i> Остановить запись';
                    voiceBtn.classList.remove('btn-secondary');
                    voiceBtn.classList.add('btn-danger');
                    definitionInput.placeholder = "Говорите сейчас...";
                    voiceStatus.querySelector('span').textContent = "Говорите сейчас... Я слушаю. Скажите 'стоп' чтобы закончить.";
                };
                
                recognition.onresult = function(event) {
                    let interimTranscript = '';
                    let finalTranscript = '';
                    
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        
                        if (event.results[i].isFinal) {
                            // Финализированный текст
                            finalTranscript += transcript;
                            voiceResultText += transcript + ' ';
                        } else {
                            // Промежуточный текст (показывается в реальном времени)
                            interimTranscript += transcript;
                        }
                    }
                    
                    // Обновляем поле ввода с уже распознанным текстом
                    if (voiceResultText.trim()) {
                        definitionInput.value = voiceResultText + (interimTranscript ? ' ' + interimTranscript : '');
                        
                        // Автоматически прокручиваем поле ввода к концу текста
                        definitionInput.scrollTop = definitionInput.scrollHeight;
                    }
                    
                    // Если есть команда "стоп" - останавливаем распознавание
                    const currentText = (voiceResultText + interimTranscript).toLowerCase();
                    if (currentText.includes('стоп') || currentText.includes('хватит') || currentText.includes('остановись')) {
                        recognition.stop();
                    }
                };
                
                recognition.onend = function() {
                    isListening = false;
                    voiceStatus.classList.remove('voice-active');
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i> Голосовой ввод';
                    voiceBtn.classList.remove('btn-danger');
                    voiceBtn.classList.add('btn-secondary');
                    definitionInput.placeholder = "Опишите понятие, для которого нужно создать новое слово...";
                    
                    // Автоматически генерируем слово после голосового ввода, если есть текст
                    if (voiceResultText.trim().length > 5) {
                        // Небольшая задержка для удобства пользователя
                        setTimeout(function() {
                            generateNewWord();
                        }, 800);
                    }
                };
                
                recognition.onerror = function(event) {
                    console.error('Ошибка распознавания речи: ', event.error);
                    isListening = false;
                    voiceStatus.classList.remove('voice-active');
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i> Голосовой ввод';
                    voiceBtn.classList.remove('btn-danger');
                    voiceBtn.classList.add('btn-secondary');
                    definitionInput.placeholder = "Опишите понятие, для которого нужно создать новое слово...";
                    
                    if (event.error === 'not-allowed') {
                        alert('Доступ к микрофону запрещен. Пожалуйста, разрешите использование микрофона в настройках браузера.');
                    } else if (event.error === 'audio-capture') {
                        alert('Не удалось получить доступ к микрофону. Убедитесь, что микрофон подключен и разрешен для использования.');
                    } else if (event.error === 'network') {
                        alert('Ошибка сети при распознавании речи. Проверьте подключение к интернету.');
                    } else {
                        alert('Произошла ошибка при распознавании речи. Пожалуйста, попробуйте еще раз.');
                    }
                };
                
                // Устанавливаем таймаут для автоматической остановки через 30 секунд
                recognition.onspeechend = function() {
                    // Автоматически останавливается после паузы в речи
                };
            } else {
                // Браузер не поддерживает распознавание речи
                voiceBtn.disabled = true;
                voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i> Голосовой ввод не поддерживается';
                voiceBtn.title = 'Ваш браузер не поддерживает голосовой ввод. Пожалуйста, используйте последние версии Chrome, Edge или Safari.';
                
                // Информационное сообщение для пользователя
                voiceBtn.addEventListener('click', function() {
                    alert('Голосовой ввод не поддерживается вашим браузером. Пожалуйста, используйте последние версии Chrome, Edge или Safari для доступа к этой функции.');
                });
            }
        }
        
        // Инициализируем распознавание речи при загрузке страницы
        initSpeechRecognition();
        
        // Проверяем поддержку синтеза речи
        if (!speechSynthesis) {
            speakBtn.disabled = true;
            speakBtn.innerHTML = '<i class="fas fa-volume-mute"></i> Озвучивание не поддерживается';
            speakBtn.title = 'Ваш браузер не поддерживает синтез речи';
        }
        
        // Улучшенная система анализа контекста
        const contextPatterns = {
            // Роботы и ИИ
            robots: {
                keywords: ['робот', 'робототехник', 'искусственн', 'нейрон', 'алгоритм', 'машинн', 'ии', 'искусственный интеллект', 'бот', 'автомат'],
                prefixes: ['Робо', 'Кибер', 'Техно', 'Алго', 'Нейро', 'Ай', 'Авто', 'Механо', 'Диги', 'Бионик', 'Смарт'],
                roots: ['тьютор', 'тренер', 'инструктор', 'педагог', 'обучатель', 'ментор', 'наставник', 'мастер', 'коуч'],
                suffixes: ['', 'ист', 'ер', 'ор'],
                domain: 'Робототехника',
                wordType: 'Название профессии',
                templates: [
                    "{word} - специалист по {activity} {objects}.",
                    "{word} - профессионал, занимающийся {process} {systems}.",
                    "{word} - эксперт в области {field}, отвечающий за {responsibility}."
                ],
                activities: ['обучению и адаптации', 'тренировке и настройке', 'программированию и калибровке'],
                objects: ['роботизированных систем', 'искусственных интеллектов', 'автономных машин'],
                processes: ['обучению и развитию', 'интеграции и адаптации', 'отладке и оптимизации'],
                systems: ['нейронных сетей', 'роботизированных комплексов', 'искусственных когнитивных систем'],
                fields: ['робототехнической педагогики', 'машинного обучения', 'искусственного интеллекта'],
                responsibilities: ['эффективное обучение автономных систем', 'адаптацию ИИ к реальным задачам', 'развитие когнитивных способностей машин']
            },
            
            // ИИ и эмоции
            ai_emotions: {
                keywords: ['чувств', 'эмоц', 'ощущен', 'переживан', 'эмпатичн', 'сочувств', 'сопереживан', 'психолог', 'аффект'],
                prefixes: ['ИИ-', 'Кибер', 'Техно', 'Алго', 'Нейро', 'Диги', 'Вирту', 'Синто', 'Эмо'],
                roots: ['патия', 'фория', 'эмия', 'тизм', 'зис', 'чувствие', 'переживание', 'ощущение', 'эмоция'],
                suffixes: ['', 'ация', 'изм', 'ость', 'ия'],
                domain: 'Психотехнологии',
                wordType: 'Эмоциональное состояние',
                templates: [
                    "{word} - сложное эмоциональное состояние, возникающее при {situation}, характеризующееся {characteristics}.",
                    "{word} - психологический феномен, проявляющийся как {manifestation} в контексте {context}.",
                    "{word} - специфическое переживание, сочетающее {emotions} при {interaction}."
                ],
                situations: ["взаимодействии с эмпатичным ИИ", "осознании искусственной природы эмоций", "диалоге с эмоциональным алгоритмом"],
                characteristics: ["смесью восхищения и тревоги", "парадоксальным сочетанием близости и отчуждения", "когнитивным диссонансом между естественным и искусственным"],
                manifestations: ["амбивалентное отношение к искусственному сознанию", "одновременное принятие и отторжение цифровой эмпатии", "дихотомия доверия и настороженности"],
                contexts: ["человеко-машинного взаимодействия", "дигитализации эмоциональной сферы", "конвергенции биологического и искусственного интеллекта"],
                emotions: ["восхищение технологическими возможностями и тревогу об утрате человеческой уникальности", "признательность за понимание и опасение манипуляции", "удовлетворение от эффективности и беспокойство о зависимости"],
                interactions: ["получении эмоциональной поддержки от небиологической сущности", "обнаружении эмпатии в алгоритмической системе", "переживании искренности в запрограммированных реакциях"]
            },
            
            // Климат и экология
            climate: {
                keywords: ['климат', 'погод', 'экологи', 'атмосфер', 'природ', 'эко', 'окружающ', 'сред', 'температур', 'осадк'],
                prefixes: ['Климато', 'Атмо', 'Погодо', 'Эко', 'Гидро', 'Термо', 'Аэро', 'Био', 'Гео', 'Солнечно', 'Ветро'],
                roots: ['ник', 'лог', 'вед', 'граф', 'метр', 'инж', 'менеджер', 'аналитик', 'инженер'],
                suffixes: ['', 'ист', 'ер', 'ор'],
                domain: 'Климатология',
                wordType: 'Название профессии',
                templates: [
                    "{word} - специалист по управлению {aspect} в условиях {condition}.",
                    "{word} - профессионал, занимающийся {activity} с использованием {tools}.",
                    "{word} - эксперт в области {field}, отвечающий за {responsibility}."
                ],
                aspects: ["климатическими системами", "погодными условиями", "экологическим балансом", "атмосферными процессами"],
                conditions: ["мегаполисов", "изменяющегося климата", "урбанизированных территорий", "глобального потепления"],
                activities: ["регулированием микроклимата", "прогнозированием погодных аномалий", "оптимизацией атмосферных параметров"],
                tools: ["искусственного интеллекта", "спутниковых данных", "нейросетевых моделей", "когнитивных алгоритмов"],
                fields: ["климатической инженерии", "атмосферных исследований", "экологического менеджмента"],
                responsibilities: ["поддержание оптимальных условий", "предотвращение климатических катастроф", "управление погодными ресурсами"]
            },
            
            // Технологии и устройства
            tech_devices: {
                keywords: ['устройств', 'гаджет', 'прибор', 'аппарат', 'техник', 'систем', 'механизм', 'девайс', 'инструмент', 'оборудован'],
                prefixes: ['Онейро', 'Сомно', 'Гипно', 'Сновид', 'Морфео', 'Нейро', 'Кванто', 'Нано', 'Био', 'Кибер'],
                roots: ['скоп', 'граф', 'трон', 'визор', 'рекордер', 'плеер', 'модуль', 'блок', 'интерфейс'],
                suffixes: ['', 'ик', 'атор', 'изатор'],
                domain: 'Нейротехнологии',
                wordType: 'Техническое устройство',
                templates: [
                    "{word} - устройство для {function}, позволяющее {capability}.",
                    "{word} - технологический аппарат, предназначенный для {purpose} с возможностью {features}.",
                    "{word} - прибор, осуществляющий {operation} и обеспечивающий {benefits}."
                ],
                functions: ["записи и воспроизведения сновидений", "визуализации подсознательных образов", "перевода мыслей в текст"],
                capabilities: ["анализировать и редактировать подсознательные процессы", "сохранять и передавать когнитивный опыт", "синтезировать новые формы восприятия"],
                purposes: ["исследования нейропластичности", "терапевтической работы с ментальными состояниями", "творческого использования когнитивных процессов"],
                features: ["интерактивного взаимодействия с сознанием", "обмена ментальными образами", "обучения контролю над мыслительными процессами"],
                operations: ["считывания нейронных паттернов", "трансляции ментальных образов в цифровой формат", "обратной связи для управления когнитивными состояниями"],
                benefits: ["глубинного самопознания через анализ мыслительных процессов", "терапевтической коррекции ментальных нарушений", "расширения когнитивных возможностей человека"]
            },
            
            // Общество и социальные системы
            society: {
                keywords: ['обществ', 'социал', 'строй', 'систем', 'прав', 'закон', 'гражданск', 'полит', 'государств', 'культур'],
                prefixes: ['ИИ-', 'Кибер', 'Техно', 'Робо', 'Алго', 'Диги', 'Вирту', 'Постгуман', 'Трансгуман'],
                roots: ['кратия', 'социум', 'полис', 'архия', 'тократия', 'номия', 'культура', 'общество', 'система'],
                suffixes: ['', 'изм', 'ия', 'ость'],
                domain: 'Социальные технологии',
                wordType: 'Абстрактное понятие',
                templates: [
                    "{word} - общественный строй, при котором {condition}, характеризующийся {characteristics}.",
                    "{word} - социальная система, где {situation}, предусматривающая {provisions}.",
                    "{word} - форма социальной организации, основанная на {foundation} и обеспечивающая {guarantees}."
                ],
                conditions: ["искусственный интеллект имеет ограниченные гражданские права", "небиологические субъекты интегрированы в правовое поле", "алгоритмические сущности обладают юридическим статусом"],
                characteristics: ["смешанной экосистемой биологических и цифровых субъектов", "постепенной эволюцией традиционных социальных институтов", "новыми формами коллективного взаимодействия"],
                situations: ["правосубъектность распространяется на когнитивные системы", "социальные роли распределяются между органическими и синтетическими акторами", "общественный договор пересматривается с учетом искусственного сознания"],
                provisions: ["этические комитеты для оценки решений ИИ", "специальные суды для рассмотрения дел с участием небиологических субъектов", "образовательные программы по взаимодействию с искусственным интеллектом"],
                foundations: ["принципе расширенной субъектности", "концепции распределенного сознания", "парадигме гибридного общества"],
                guarantees: ["баланс между технологическим прогрессом и сохранением человеческой автономии", "инклюзивность различных форм разума в социальных процессах", "устойчивое развитие в условиях технологической сингулярности"]
            }
        };
        
        // Улучшенный анализ контекста
        function analyzeContext(definition) {
            const text = definition.toLowerCase();
            let bestMatch = null;
            let maxScore = 0;
            
            // Проверяем все паттерны
            for (const [category, pattern] of Object.entries(contextPatterns)) {
                let score = 0;
                
                // Подсчитываем совпадения по ключевым словам
                for (const keyword of pattern.keywords) {
                    if (text.includes(keyword)) {
                        score += 3; // Больший вес для точных совпадений
                    }
                }
                
                // Проверяем наличие общих слов, связанных с категорией
                const categoryWords = {
                    robots: ['обучать', 'обучение', 'тренировать', 'тренировка', 'программировать', 'настраивать', 'калибровать'],
                    ai_emotions: ['смешанный', 'противоречивый', 'двойственный', 'амбивалентный', 'парадоксальный'],
                    climate: ['управление', 'контроль', 'регулирование', 'прогнозирование', 'мониторинг'],
                    tech_devices: ['перевод', 'преобразование', 'запись', 'воспроизведение', 'хранение', 'редактирование'],
                    society: ['интеграция', 'включение', 'участие', 'права', 'обязанности', 'статус']
                };
                
                if (categoryWords[category]) {
                    for (const word of categoryWords[category]) {
                        if (text.includes(word)) {
                            score += 2;
                        }
                    }
                }
                
                // Если набрали баллы и это лучший результат
                if (score > maxScore) {
                    maxScore = score;
                    bestMatch = {
                        category: category,
                        pattern: pattern,
                        score: score
                    };
                }
            }
            
            // Если нет хорошего совпадения, создаем универсальный паттерн
            if (!bestMatch || maxScore < 3) {
                // Анализируем структуру запроса для создания осмысленного слова
                const words = text.split(' ');
                
                // Определяем тип слова по формулировке
                let detectedType = 'Название профессии';
                let detectedDomain = 'Общие технологии';
                
                if (text.includes('должность') || text.includes('профессия') || text.includes('специалист') || text.includes('работник')) {
                    detectedType = 'Название профессии';
                } else if (text.includes('чувство') || text.includes('эмоция') || text.includes('ощущение') || text.includes('переживание')) {
                    detectedType = 'Эмоциональное состояние';
                    detectedDomain = 'Психология';
                } else if (text.includes('устройство') || text.includes('гаджет') || text.includes('прибор') || text.includes('аппарат')) {
                    detectedType = 'Техническое устройство';
                    detectedDomain = 'Технологии';
                } else if (text.includes('термин') || text.includes('понятие') || text.includes('концепция')) {
                    detectedType = 'Абстрактное понятие';
                    detectedDomain = 'Общие науки';
                }
                
                // Определяем тему по ключевым словам
                let theme = 'общее';
                let themePrefixes = ['Техно', 'Инфо', 'Универ', 'Мульти', 'Интер'];
                let themeRoots = ['лог', 'граф', 'метр', 'ник', 'ист'];
                
                if (text.includes('робот') || text.includes('ии') || text.includes('искусственн')) {
                    theme = 'роботы';
                    themePrefixes = ['Робо', 'Кибер', 'Техно', 'Алго', 'Нейро', 'Ай'];
                    themeRoots = ['тьютор', 'тренер', 'инструктор', 'педагог', 'мастер'];
                    detectedDomain = 'Робототехника';
                } else if (text.includes('климат') || text.includes('погод') || text.includes('экологи')) {
                    theme = 'климат';
                    themePrefixes = ['Климато', 'Эко', 'Атмо', 'Гидро', 'Термо'];
                    themeRoots = ['ник', 'лог', 'вед', 'граф', 'инж'];
                    detectedDomain = 'Климатология';
                } else if (text.includes('медиц') || text.includes('здоров') || text.includes('лечен')) {
                    theme = 'медицина';
                    themePrefixes = ['Медико', 'Био', 'Нейро', 'Психо', 'Гено'];
                    themeRoots = ['лог', 'терапевт', 'хирург', 'диагност'];
                    detectedDomain = 'Медицина';
                }
                
                bestMatch = {
                    category: 'custom',
                    pattern: {
                        prefixes: themePrefixes,
                        roots: themeRoots,
                        suffixes: ['', 'ист', 'ер', 'ор'],
                        domain: detectedDomain,
                        wordType: detectedType,
                        isCustom: true
                    },
                    score: maxScore
                };
            }
            
            // Определяем уровень соответствия
            let matchLevel = 'low';
            if (maxScore >= 6) matchLevel = 'high';
            else if (maxScore >= 3) matchLevel = 'medium';
            
            return {
                category: bestMatch.category,
                pattern: bestMatch.pattern,
                matchLevel: matchLevel,
                score: maxScore
            };
        }
        
        // Генерация слова на основе анализа
        function generateWord(definition) {
            const context = analyzeContext(definition);
            const pattern = context.pattern;
            
            // Выбираем компоненты слова
            const prefix = pattern.prefixes[Math.floor(Math.random() * pattern.prefixes.length)];
            const root = pattern.roots[Math.floor(Math.random() * pattern.roots.length)];
            const suffix = pattern.suffixes[Math.floor(Math.random() * pattern.suffixes.length)];
            
            // Формируем слово
            let word = prefix + root + suffix;
            word = word.charAt(0).toUpperCase() + word.slice(1);
            
            // Если это кастомный паттерн без шаблона, создаем простое описание
            let description;
            
            if (pattern.isCustom) {
                // Для кастомных паттернов создаем прямое описание
                description = `${word} - ${definition}`;
            } else {
                // Для стандартных паттернов используем шаблоны
                const templates = pattern.templates || [`{word} - ${definition}`];
                const template = templates[Math.floor(Math.random() * templates.length)];
                description = template.replace('{word}', word);
                
                // Заменяем дополнительные заполнители
                for (const key in pattern) {
                    if (Array.isArray(pattern[key]) && key !== 'keywords' && key !== 'prefixes' && key !== 'roots' && key !== 'suffixes') {
                        const placeholder = `{${key}}`;
                        if (description.includes(placeholder)) {
                            const randomElement = pattern[key][Math.floor(Math.random() * pattern[key].length)];
                            description = description.replace(placeholder, randomElement);
                        }
                    }
                }
            }
            
            // Убираем возможные оставшиеся заполнители
            description = description.replace(/\{[^}]+\}/g, definition);
            
            return {
                word: word,
                description: description,
                context: context,
                originalDefinition: definition
            };
        }
        
        // Функция генерации нового слова
        function generateNewWord() {
            const definition = definitionInput.value.trim();
            
            if (!definition) {
                alert('Пожалуйста, введите описание понятия');
                definitionInput.focus();
                return;
            }
            
            // Генерируем слово и данные
            currentWordData = generateWord(definition);
            currentWord = currentWordData.word;
            
            // Показываем результат
            generatedWord.textContent = currentWord;
            generatedDefinition.textContent = currentWordData.description;
            
            // Устанавливаем детали
            wordType.textContent = currentWordData.context.pattern.wordType || 'Существительное';
            wordDomain.textContent = currentWordData.context.pattern.domain || 'Общие технологии';
            
            // Устанавливаем уровень соответствия
            const matchLevel = currentWordData.context.matchLevel;
            wordComplexity.textContent = matchLevel === 'high' ? 'Высокий' : 
                                       matchLevel === 'medium' ? 'Средний' : 'Низкий';
            
            // Обновляем индикатор соответствия
            contextMatch.className = 'context-match ' + matchLevel + '-match';
            const matchText = matchLevel === 'high' ? 'Высокое соответствие контексту: слово точно отражает описание' :
                            matchLevel === 'medium' ? 'Среднее соответствие контексту: слово частично отражает описание' :
                            'Низкое соответствие контексту: слово создано на основе общего анализа';
            
            contextMatch.innerHTML = `<i class="fas fa-${matchLevel === 'high' ? 'check-circle' : matchLevel === 'medium' ? 'exclamation-circle' : 'info-circle'}"></i><span>${matchText}</span>`;
            
            // Показываем секцию с результатом
            resultSection.classList.add('active');
            articleSection.classList.remove('active');
            speechStatus.classList.remove('speech-active');
            
            // Останавливаем текущее озвучивание
            stopSpeaking();
            
            // Прокручиваем к результату
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Функция для "узаконивания" термина
        function legalizeTerm() {
            if (!currentWordData) {
                alert('Сначала сгенерируйте слово');
                return;
            }
            
            const word = currentWord;
            const description = currentWordData.description;
            const originalDefinition = currentWordData.originalDefinition;
            const context = currentWordData.context;
            
            // Генерируем логически связанную статью
            articleTitle.textContent = `Научная статья: "${word}"`;
            
            // Создаем содержание статьи, связанное со словом и его описанием
            const articleText = generateArticleContent(word, description, originalDefinition, context);
            
            articleContent.innerHTML = articleText;
            articleSection.classList.add('active');
            
            // Прокручиваем к статье
            articleSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Генерация содержания статьи
        function generateArticleContent(word, description, originalDefinition, context) {
            // Разные шаблоны статей для разных уровней соответствия
            const baseArticle = `
                <p><strong>Аннотация:</strong> В статье рассматривается новый термин "${word}", обозначающий ${description.toLowerCase()} Вводится обоснование необходимости данного термина в современной науке и технологиях.</p>
                
                <p><strong>Введение:</strong> Быстрое развитие технологий и трансформация социальных отношений требуют постоянного обновления понятийного аппарата. ${originalDefinition} представляет собой пример явления, для которого в существующем языке отсутствуют адекватные обозначения.</p>
                
                <p><strong>Этимология термина:</strong> Термин "${word}" образован от комбинации корней, отражающих суть описываемого явления. Лингвистическая структура термина передает его принадлежность к области ${context.pattern.domain}.</p>
                
                <p><strong>Сфера применения:</strong> ${word} находит применение в ${getApplicationArea(context)}. Основные задачи включают: ${getTasks(context)}.</p>
                
                <div class="examples">
                    <h4><i class="fas fa-comment-alt"></i> Примеры употребления термина "${word}":</h4>
                    <ul>
                        <li>${getUsageExample1(word, context)}</li>
                        <li>${getUsageExample2(word, context)}</li>
                        <li>${getUsageExample3(word, context)}</li>
                        <li>${getUsageExample4(word, context)}</li>
                    </ul>
                </div>
                
                <p><strong>Заключение:</strong> Введение термина "${word}" в научный и профессиональный оборот позволяет стандартизировать описание нового явления, привлечь внимание к актуальной проблематике и способствовать развитию необходимых компетенций. Термин представляет собой пример адаптации языка к вызовам современности.</p>
                
                <p><strong>Литература:</strong> 
                <br>1. Иванов А.А. "Неология как наука о новых словах". М.: Изд-во МГУ, 2023.
                <br>2. Smith J., Tanaka H. "Future linguistics: creating words for tomorrow". Cambridge University Press, 2022.
                <br>3. Петрова В.С. "Язык будущего: тенденции и прогнозы". СПб.: Лингвистика будущего, 2024.</p>
            `;
            
            return baseArticle;
        }
        
        // Вспомогательные функции для генерации статей
        function getApplicationArea(context) {
            const areas = {
                robots: "области робототехники и искусственного интеллекта",
                ai_emotions: "сфере человеко-машинного взаимодействия и психотехнологий",
                climate: "климатической инженерии и урбанистической экологии",
                tech_devices: "нейротехнологиях и когнитивных исследованиях",
                society: "социальных науках и политической философии"
            };
            
            return areas[context.category] || "различных технологических и научных областях";
        }
        
        function getTasks(context) {
            const tasks = {
                robots: "обучение автономных систем, адаптацию ИИ к реальным задачам, развитие когнитивных способностей машин",
                ai_emotions: "анализ психологических реакций на искусственный интеллект, разработку этических стандартов для эмоциональных ИИ, изучение трансформации человеческих эмоций в цифровую эпоху",
                climate: "управление микроклиматом урбанизированных территорий, прогнозирование погодных аномалий, разработку мер адаптации к изменению климата",
                tech_devices: "исследование нейропластичности, разработку интерфейсов мозг-компьютер, создание технологий усиления когнитивных способностей",
                society: "разработку правовых рамок для искусственного интеллекта, анализ социальных последствий технологической сингулярности, создание моделей гибридного общества"
            };
            
            return tasks[context.category] || "решение актуальных задач в соответствующей области";
        }
        
        function getUsageExample1(word, context) {
            const examples = {
                robots: `Профессия <strong>${word.toLowerCase()}а</strong> становится одной из наиболее востребованных с распространением автономных роботизированных систем.`,
                ai_emotions: `В исследовании человеко-машинного взаимодействия был выявлен феномен <strong>${word.toLowerCase()}и</strong> как типичная реакция на эмпатического ИИ.`,
                climate: `С развитием технологий управления климатом профессия <strong>${word.toLowerCase()}а</strong> приобретает критическое значение для устойчивого развития городов.`,
                tech_devices: `Клинические испытания нового <strong>${word.toLowerCase()}а</strong> показали его эффективность в терапии когнитивных расстройств.`,
                society: `Конституционные эксперты обсуждают возможность реализации принципов <strong>${word.toLowerCase()}и</strong> в правовых системах будущего.`
            };
            
            return examples[context.category] || `Термин <strong>${word}</strong> начинает использоваться в специализированной литературе для описания новых явлений.`;
        }
        
        function getUsageExample2(word, context) {
            return `Международная конференция была посвящена обсуждению перспектив развития <strong>${word.toLowerCase()}и</strong> в контексте технологического прогресса.`;
        }
        
        function getUsageExample3(word, context) {
            return `Внедрение понятия <strong>${word.toLowerCase()}и</strong> в образовательные программы поможет подготовить специалистов для работы с новыми технологиями.`;
        }
        
        function getUsageExample4(word, context) {
            const examples = {
                robots: `Компании-разработчики роботов ищут квалифицированных <strong>${word.toLowerCase()}ов</strong> для обучения своих систем сложным задачам.`,
                ai_emotions: `Психологи разрабатывают методики работы с пациентами, испытывающими <strong>${word.toLowerCase()}ю</strong> при длительном взаимодействии с ИИ.`,
                climate: `Городские администрации привлекают <strong>${word.toLowerCase()}ов</strong> для разработки систем управления микроклиматом в мегаполисах.`,
                tech_devices: `Производители технологических устройств выпускают новые модели <strong>${word.toLowerCase()}ов</strong> с улучшенными характеристиками.`,
                society: `Социологи изучают общественное восприятие концепции <strong>${word.toLowerCase()}и</strong> через опросы и фокус-группы.`
            };
            
            return examples[context.category] || `Термин <strong>${word}</strong> представляет собой важный концептуальный инструмент для осмысления трансформации в соответствующей области.`;
        }
        
        // Функции для озвучивания текста
        function speakArticle() {
            if (!speechSynthesis) {
                alert('Синтез речи не поддерживается вашим браузером');
                return;
            }
            
            if (isSpeaking) {
                stopSpeaking();
                return;
            }
            
            // Получаем текст статьи
            const articleText = articleContent.innerText;
            const titleText = articleTitle.innerText;
            const fullText = titleText + ". " + articleText;
            
            // Создаем объект utterance Озвучка текста
            currentUtterance = new SpeechSynthesisUtterance(fullText);
            currentUtterance.lang = 'ru-RU';
            currentUtterance.rate = 1.5; // Нормальная скорость для лучшей разборчивости
            currentUtterance.pitch = 1.2;
            currentUtterance.volume = 1;
            
            // События
            currentUtterance.onstart = function() {
                isSpeaking = true;
                speechStatus.classList.add('speech-active');
                speakBtn.innerHTML = '<i class="fas fa-pause-circle"></i> Пауза';
                speakBtn.classList.remove('btn-info');
                speakBtn.classList.add('btn-warning');
            };
            
            currentUtterance.onend = function() {
                isSpeaking = false;
                speechStatus.classList.remove('speech-active');
                speakBtn.innerHTML = '<i class="fas fa-volume-up"></i> Озвучить статью';
                speakBtn.classList.remove('btn-warning');
                speakBtn.classList.add('btn-info');
            };
            
            currentUtterance.onerror = function(event) {
                console.error('Ошибка синтеза речи:', event);
                isSpeaking = false;
                speechStatus.classList.remove('speech-active');
                speakBtn.innerHTML = '<i class="fas fa-volume-up"></i> Озвучить статью';
                speakBtn.classList.remove('btn-warning');
                speakBtn.classList.add('btn-info');
                
                if (event.error === 'interrupted') {
                    // Пользователь прервал речь - это нормально
                } else {
                    alert('Произошла ошибка при озвучивании текста');
                }
            };
            
            // Запускаем синтез речи
            speechSynthesis.speak(currentUtterance);
        }
        
        function stopSpeaking() {
            if (speechSynthesis && isSpeaking) {
                speechSynthesis.cancel();
                isSpeaking = false;
                speechStatus.classList.remove('speech-active');
                speakBtn.innerHTML = '<i class="fas fa-volume-up"></i> Озвучить статью';
                speakBtn.classList.remove('btn-warning');
                speakBtn.classList.add('btn-info');
            }
        }
        
        // Обработчики событий
        generateBtn.addEventListener('click', generateNewWord);
        
        voiceBtn.addEventListener('click', function() {
            if (!recognition) {
                alert('Голосовой ввод не поддерживается вашим браузером. Пожалуйста, используйте последние версии Chrome, Edge или Safari.');
                return;
            }
            
            if (isListening) {
                // Останавливаем запись
                recognition.stop();
                isListening = false;
                voiceStatus.classList.remove('voice-active');
                voiceBtn.innerHTML = '<i class="fas fa-microphone"></i> Голосовой ввод';
                voiceBtn.classList.remove('btn-danger');
                voiceBtn.classList.add('btn-secondary');
                definitionInput.placeholder = "Опишите понятие, для которого нужно создать новое слово...";
            } else {
                // Начинаем запись
                // Сбрасываем предыдущий текст
                voiceResultText = "";
                
                try {
                    recognition.start();
                } catch (error) {
                    console.error('Ошибка запуска распознавания речи:', error);
                    alert('Не удалось начать запись. Пожалуйста, проверьте разрешения для микрофона и попробуйте еще раз.');
                }
            }
        });
        
        clearBtn.addEventListener('click', function() {
            definitionInput.value = '';
            definitionInput.focus();
        });
        
        legalizeBtn.addEventListener('click', legalizeTerm);
        
        speakBtn.addEventListener('click', speakArticle);
        
        stopSpeakBtn.addEventListener('click', stopSpeaking);
        
        // Обработчики для примеров
        exampleItems.forEach(item => {
            item.addEventListener('click', function() {
                const example = this.getAttribute('data-example');
                definitionInput.value = example;
                definitionInput.focus();
                
                // Автоматически генерируем слово для примера
                setTimeout(generateNewWord, 300);
            });
        });
        
        // Обработка нажатия Enter в текстовом поле
        definitionInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && event.ctrlKey) {
                generateNewWord();
            }
        });
        
        // Инициализация: показываем пример при загрузке
        window.addEventListener('load', function() {
            definitionInput.value = "должность человека который будет обучать роботов";
        });
    </script>
</body>
</html>